<!-- ======================================================= -->
<!-- MODAL / BANDEAU DE CONSENTEMENT COOKIE TECHNIQUE -->
<!-- ======================================================= -->
<div id="cookie-banner" style="
    display: none;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 500px;
    width: 90%;
    padding: 15px 20px;
    background-color: #2c3e50; /* Couleur sombre pour le contraste */
    color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    z-index: 10000; 
    text-align: center;
">
    <p style="margin: 0 0 10px 0; font-size: 14px;">
        <i class="fas fa-cookie-bite" style="margin-right: 8px;"></i>
        <strong>UAP Immo</strong> utilise des cookies techniques nécessaires au fonctionnement de notre site et ne peuvent pas être désactivés.
    </p>
    <button id="accept-cookies" style="
        background-color: #C4B990; /* Couleur d'accentuation */
        color: #000000;
        border: none;
        padding: 8px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.2s;
        font-size: 14px;
    ">
        J'ai compris
    </button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const cookieName = 'uap_cookie_consent';
    const expirationDays = 60; // 2 mois environ (60 jours)

    /**
     * Lit la valeur d'un cookie par son nom.
     */
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }

    /**
     * Crée ou met à jour un cookie avec une date d'expiration.
     */
    function setCookie(name, value, days) {
        const d = new Date();
        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "expires=" + d.toUTCString();
        // Le cookie doit être accessible sur tout le domaine et sécurisé
        document.cookie = name + "=" + value + ";" + expires + ";path=/;secure;samesite=Lax";
    }

    const cookieBanner = document.getElementById('cookie-banner');
    const acceptButton = document.getElementById('accept-cookies');

    // 1. Vérification au chargement
    const consent = getCookie(cookieName);

    if (consent !== 'accepted') {
        // Le cookie n'existe pas ou la valeur est incorrecte, afficher le bandeau
        cookieBanner.style.display = 'block';
    }

    // 2. Gestion du clic
    if (acceptButton) {
        acceptButton.addEventListener('click', function() {
            setCookie(cookieName, 'accepted', expirationDays);
            cookieBanner.style.opacity = '0';
            
            // Masquer le bandeau après l'animation
            setTimeout(() => {
                cookieBanner.style.display = 'none';
            }, 300);
        });
    }
});
</script>
<!-- FIN BANDEAU DE CONSENTEMENT -->
